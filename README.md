
# Основное
Данный бот предназначен для генерации картинок с помощью [stable-diffusion-webui](https://github.com/AUTOMATIC1111/stable-diffusion-webui) (оно работает эффективнее простого stable diffusion и обладает лучшей настройкой).

Все настройки хранятся в файлах ./constants.py и ./mesconstants.py. Все константы более-менее расписаны в самих файликах.

Чтобы запустить бота в dev моде надо установить все из ./requirements.txt и указать основные переменные в ./constants.py:
```py
API_TOKEN = "<Обязательно заполнить>" # bot token
infoChatID = "<Обязательно заполнить>" # id чата куда отправляется информация spyMode и ошибки(в любом случае)
```

Чтобы запустить бота в build моде (с использованием stable diffusion), вам нужно сделать все что нужно в dev моде, накатить stable-diffusion-webui и запустить его с режимом api ~~или же просто запустить installation.sh~~ (на данный момент скрипт не готов). Кроме того требуется скачать используемые модели и добавить их в бота. 

По каким либо вопросам пишите в тг - **@fiorigzg**.

# Инструкция по использованию
Инструкция также может быть найдена при нажатии кнопки "Помощь" в главном меню бота.

![image](https://github.com/fiorigzg/blueberry-ai-bot/assets/51861034/2e2ed440-4120-4196-81eb-00425ae79f29)

## Основное
Создать новый запрос для генерации изображения можно одним из 3х способов:

1. Написать боту любой текст, который будет добавлен в теги нового запроса.
2. Просто скопировать и вставить текст другого запроса, все параметры которого будут присвоены новому.
3. Прислать боту изображение, которое будет использовано в качестве примера для нового запроса.

После задания запроса все параметры можно изменять. Для начала генерации запрос нужно подтвердить. Все русские теги будут автоматически переведены на английский.

*Запрос также можно повторить после генерации:*

![image](https://github.com/fiorigzg/blueberry-ai-bot/assets/51861034/9baf0234-2239-4a17-a13a-bd6003b49494)

## Параметры запроса
1. Теги - по этим тегам будет сгенерировано изображение. Теги перечисляются через запятую. Важные теги оборачиваются в скобки: (важный тег), ((ещё более важный тег)), (((просто пипец важный тег))). Теги на русском будут автоматически переведены на английский.
2. Антитеги - работают как обратные теги. 
3. Тип - определяет стиль, в котором будет рисоваться изображение.
4. Кол-во изображений - число генерируемых изображений.
5. Пригодность - определяет то, насколько ИИ может отклоняться от тегов(чем больше значение, тем меньше отклонение).
6. Ширина - ширина генерируемого изображения.
7. Высота - высота генерируемого изображения.
8. Пример картинки - изображение, на основе которого будет генерироваться картинка
9. Схожесть с примером - то, насколько похоже генерируемая картинка на изображение-пример(чем выше значение, тем больше схожесть)

*Как выглядит запрос в боте:*

![image](https://github.com/fiorigzg/blueberry-ai-bot/assets/51861034/afe739d7-50ec-4f0e-b0e8-54a4870d933a)

## Генерация похожего и улучшение качества
Генерация похожего - генерируется одно изображение с теми-же тегами и исходным изображением в качества 'примера картинки'.

Улучшение качества - улучшает качество изображения ровно в 2 раза от исходного.

*Кнопки генерации похожего и улучшения качества появляются после выполнения запроса:*

![image](https://github.com/fiorigzg/blueberry-ai-bot/assets/51861034/00aef25b-0f2f-4f84-bca3-e7187499dbd9)

## Подписка (все может быть отредачено в переменных)
Пользователи без подписки могут генерировать 10 изображений в день. Обновление происходит каждые 24 часа в 00:00 по МСК.

Подписка стоимостью в 150р оформляется ровно на 30 дней. С ней ограничения на запросы исчезают. Кроме того, пользователи с подпиской получают приоритетную очередь.

Тут подписка организована через транзакцию yoomoney.

*Меню для оплаты выглядит данным образом:*

![image](https://github.com/fiorigzg/blueberry-ai-bot/assets/51861034/99f0109d-9140-45c7-98b8-e12d95ec2f36)

